---
title: "Data Visualization with ggplot2"
author: "Maria Tackett"
date: "05.12.20"
output:
  xaringan::moon_reader:
  #  mathjax: "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML"
    css: "slide-design.css"
 #   logo: img/sta210-sticker-icon.png
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      slideNumberFormat: "%current%"
      ratio: 16:9
---

### Goals for today 

- list of goals on left 
- output of what they can make on right

```{r echo = F, warning = F, message = F}
library(tidyverse)
```

---
## ggplot2 in tidyverse

.pull-left[
```{r echo = F, out.width = '80%'}
knitr::include_graphics("img/ggplot2-part-of-tidyverse.png")
```
]

.pull-right[
- **ggplot2** is tidyverse's data visualization package

- The `gg` in "ggplot2" stands for Grammar of Graphics

- It is inspired by the book **Grammar of Graphics** by Leland Wilkinson

```{r echo = F, out.width = "40%", fig.align = "center"}
knitr::include_graphics("img/gg-book.jpg")
```

]
---

## Grammar of Graphics

A .vocab[grammar of graphics] is a tool that enables us to concisely describe the components of a graphic

.center[
```{r echo = F, out.width = '80%'}
knitr::include_graphics("img/gg-layers.png")
```
]

---

### example plot and code


![](img/diamonds.jpg)
)
- Use diamonds dataset

---

### Basic `ggplot` syntax

```{r eval = F}
ggplot(data = [dataset], aes(x = [x-var], y = [y-var])) +
  geom_xx() + 
  other options
```

---
### Demo

.pull-left[
```{r echo = F}
ggplot(data = diamonds, aes(x = carat, y = price)) +
  geom_point() + 
  labs(x = "Carat",
       y = "Price",
       title = "Price vs. Carat")
```
]

.pull-right[
.vertical-center[
.question[
**Let's take a look at how to create this plot in R.**
]
]
]

---

### Our first plot 

```{r, fig.height = 4.5, fig.width = 9, fig.align = "center"}
ggplot(data = diamonds, aes(x = carat, y = price)) +
  geom_point() + 
  labs(x = "Carat",
       y = "Price",
       title = "Price vs. Carat")
```

---

### Aesthetics 

We can incorporate various aesthetics, i.e. features, to our plot to incoporate additional variables or just customize the plot. These aesthetics include 

- `color`
- `shape`
- `size`
- `alpha` (transparency)

---

### Assigning Aesthetics

.pull-left[
```{r, echo = F, fig.height = 5, fig.align = "center"}
ggplot(data = diamonds, aes(x = carat, y = price, color = cut)) +
  geom_point() + 
  labs(x = "Carat",
       y = "Price",
       title = "Price vs. Carat")
```

.center[
**Color based on value of `cut`.**
**Aesthetic feature mapped to a variable inside `aes()`.**
]

]

.pull-right[
```{r echo = F, fig.height = 5, fig.align = "center"}
ggplot(data = diamonds, aes(x = carat, y = price)) +
  geom_point(color = "purple") + 
  labs(x = "Carat",
       y = "Price",
       title = "Price vs. Carat")
```

.center[
**Same color for all observations.**
**Aesthetic feature defined outside of `aes()`.** 
]
]

---

### Demo

- Let's change the color and shape

 
--- 
 
### Formative assessment
Multiple choice question 

- Do what is wrong with this plot, where they assigned blue in the as the aesthetic. 

- Change to diamond data.

---

## Faceting: Display subsets of data

Use **faceting** to create smaller plots that display different subsets of the data.

```{r, fig.height = 5 , eval = F}
ggplot(data = diamonds, aes(x = carat, y = price)) +
  geom_point() + 
  labs(x = "Carat",
       y = "Price",
       title = "Price vs. Carat") + 
  facet_wrap(~ cut) #<<
```

---

```{r, fig.height = 5, fig.align = "center"}
ggplot(data = diamonds, aes(x = carat, y = price)) +
  geom_point() + 
  labs(x = "Carat",
       y = "Price",
       title = "Price vs. Carat", 
       subtitle = "Faceted by Cut") + #<<
  facet_wrap(~ cut) #<<
```

---

## Let's put it all together


---

## Parson's Problem 


---

### Next steps




 

